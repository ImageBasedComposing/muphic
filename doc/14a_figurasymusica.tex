\subsection{Formato de representación de las figuras}

\todo{Añadir el diagrama y hacer referencia a el cuando una explicación textual no sea suficiente}
Las imágenes vienen representadas por un documento XML  estructurado de la siguiente manera:

\begin{itemize}
\item \textbf{Shapes}: Representa la imagen completa, contiene un listado de las figuras resultantes del análisis.
\item \textbf{Figure}: Contiene la información relativa a una figura.
\item \textbf{Id}: Identificador único de la figura.
\item \textbf{Color}: Identificador para delimitar la información sobre el color.
\item \textbf {RGB}: Identificador para delimitar la información sobre los valores RGB del color.
\item \textbf{R}: Valor referente a la escala de rojo en la escala RGB.
\item \textbf{G}: Valor referente a la cantidad de verde en la escala RGB.
\item \textbf{B}: Valor referente a la cantidad de azul presente en escala RGB.
\item \textbf{VertexList}: Lista de vértices que componen el polígono.
\item \textbf{Vertex [type=``normal'']}: Identificador para delimitar un vértice que pertenece a uno de los extremos de una recta o curva del polígono.
\item \textbf{Position}: Identificador para delimitar la posición de un vértice en la imagen.
\item \textbf{X}: Componente x de la posición del vértice.
\item \textbf{Y}: Componente y de la posición del vértice.
\item \textbf{Vertex [type=``center'']}: Identificador para delimitar un vértice que señala el centro de circunferencia que forma la curva que conecta el vértice anterior a este con el siguiente.
\item \textbf{Area}: Valor numérico del área de una figura.
\item \textbf{Canvas}: Identificador que delimita las figuras situadas dentro de la figura que contiene este elemento. 
\end{itemize}

\todo{Esto es un primer boceto del sistema de clases de figuras que trabaja sobre el XML, técnicamente correcto pero le falta un repaso}

Para poder tratar toda esta información el proyecto dispone de un sistema de clases que permite cargar o guardar y manejar los datos del XML, el siguiente diagrama muestra como está estructurado:
\\\todo{Imagen con el diagrama de Figuras (con o sin phicfigures y mufigures?)}
\newline
\\La clase ``Figura'' esta compuesta por una lista de elementos ``Vertice'', formados por unas coordenadas 'x' e 'y', que determinan su forma, su área y el color expresado en RGB \todo{referencia?}, esto determinaría el polígono al que se refiere. Debido a la procedencia de las figuras y la interpretación que se ha realizado de ellas se dispone también de: un puntero a su figura padre, de estar incluida en otra figura, una lista ordenada arbitrariamente de figuras hijas, en el caso de ser ``padre'' y punteros a las figuras adyacentes a ella según la prioridad que se haya querido tener en cuenta. Además de los elementos mencionados ``Figura'' dispone de la siguiente funcionalidad:
\begin{itemize}
\item \textbf{getSimpleCenter}: Permite adquirir una aproximación del centro del polígono al que representa la figura.
\item \textbf{getBaryCenter}: Permite adquirir el baricentro del polígono al que representa la figura.
\item \textbf{polarize}: Devuelve la figura como una lista de vértices en coordenadas expresadas como un ángulo y longitudes relativas. 
\item \textbf{radialDivision}: Devuelve una división radial de la figura.
\item \textbf{getSaturation}: Calcula el valor de la saturación de la figura.
\item \textbf{isPointInside}: Devuelve si un punto está o no dentro de la figura.
\item \textbf{isFigureInside}: Determina si una figura está o no envuelta por esta.
\end{itemize}
Además también permite el acceso a sus elementos y el manejo de su lista de hijos a través de las funciones pertinentes.
\newline
\todo{mencionar o no las funciones de setParentSon structure, no me queda claro que hacen o si son relevantes para esta parte...}
\\``Figuras'' se caracteriza por tener dos listas de elementos ``Figura'', una con todas las figuras que se le hayan añadido y otra que solo contiene las figuras que están situadas sobre el fondo de la imagen, es decir, que no están envueltas por ninguna otra figura. Además de estos elementos dispone también de la siguiente funcionalidad:
\begin{itemize}
\item \textbf{guardar}: Esta función se encarga de escribir toda la información que contiene en un fichero XML, tras escribir toda la cabecera del fichero se irá recorriendo la lista de figuras padre escribiéndolas como elementos de ``shapes'', cada vez que se escriba una figura se recorrerá su lista de hijas y se irán guardando como elementos de la figura padre en su elemento XML mencionado anteriormente: ``canvas''. \todo{(referencia?)}, de esta manera mantiene la relación padre-hijos en el XML.
\item \textbf{cargar}: Esta función se encargará de leer el fichero XML interpretando su estructura para guardar correctamente la información en figuras, haciendo la distinción de aquellas directamente situadas en ``shapes'' para la segunda lista de figuras y construyendo todos los elementos ``Figura'' con todos sus atributos inicializados a sus valores correspondientes.
\item \textbf{calcularCentro}: Calcula el centro relativo de todas las figuras de la imagen.
\item \textbf{deleteReps}: Borra las figuras repetidas que pueden aparecer como resultado de algunos de los análisis utilizados \todo{referencia}
\item \textbf{redoColorFig}: Vuelve a calcular valores relativos al color de todas las figuras juntas y su variación respecto a las demás. \todo{repasar, no se si es correcto} 
\end{itemize}
Además de lo mencionado anteriormente permite también tratar con sus listas y trabajar con sus elementos.

\subsection{Formato de representación de música}

\todo{Repasar formalizar}

La estructura para representar la música propuesta en el proyecto está determinada por un árbol que trabaja desde el elemento más general, la canción que se va a componer, al más específico, cada una de las notas que componen dicha canción, como muestra la Figura~\ref{fig:structmusic}.\\
	
	\begin{figure}[htbp]
	\centering
	\hspace*{-0.1in}
	\includegraphics[scale=0.47]{graphics/musica-estructura.png}
	\caption{Estructura de una pieza musical}
	\label{fig:structmusic}
	\end{figure}


\textbf{Música}: Al nivel de la Música, trabajamos con la información relativa a toda la canción que se va a componer, por un lado está información relativa al nombre de la composición y del compositor que la ha hecho, también dispone de una serie de voces a partir de las cuales estará formada la canción y su tempo. Por último a un nivel más cercano, la implementación permitirá elegir con que herramienta querremos crear el archivo de audio de salida.
\newline

\textbf{Voz}: Por debajo de la Música se trabaja con las Voces. Su estructura permite determinar el instrumento, la tonalidad y el tempo de cada una de las voces que componen una pieza, cada una de estas voces esta compuesta de varios segmentos musicales, los cuales al ser reproducidos en el orden establecido por el compositor forman la Voz en cuestión.
\newline

\textbf{Segmento}: Estos elementos tienen la posibilidad de establecer su propia métrica, su tempo y su duración. Los segmentos a su vez están formados por una sucesión de símbolos.
\newline

\textbf{Símbolo}: Son la unidad a partir de la cual se crean todos los elementos básicos de la música, símbolo nos permite establecer una duración para estos elementos. Actualmente el proyecto crea dos tipos de elementos a partir de símbolo:
\begin{itemize}
\item \textbf{Notas}: Estos símbolos tienen asociada una duración, determinada por el componente anterior, y un tono establecido por un número que posteriormente será interpretado con la herramienta que generará el archivo de audio.
\item \textbf{Acordes}: Los acordes están formados de la misma manera que las notas pero en lugar de tener asociado un único tono pueden tener de dos a tres tonos diferentes, en la práctica esto resultará en todos los tonos sonando a la vez durante el mismo tiempo una vez generada la canción.
\end{itemize}
 
